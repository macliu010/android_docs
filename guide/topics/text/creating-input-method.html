<!DOCTYPE html>







































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" />
<title>Creating an Input Method | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="../../../assets/css/default.css" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="../../../assets/js/global-libraries-combined.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../../";
</script>
<script src="../../../assets/js/docs.js" type="text/javascript"></script>
<script src="../../../navtree_data.js" type="text/javascript"></script>

</head>
<body class="gc-documentation
  develop guide" itemscope itemtype="http://schema.org/Article">
<a name="top"></a>

    <!-- Header -->
    <div id="header">
        <div class="wrap" id="header-wrap">
          <div class="col-3 logo">
          <a href="../../../index.html">
            <img src="../../../assets/images/dac_logo.png" width="123" height="25" alt="Android Developers" />
          </a>
          <div class="btn-quicknav" id="btn-quicknav">
          	<a href="#" class="arrow-inactive">Quicknav</a>
			      <a href="#" class="arrow-active">Quicknav</a>
          </div>
          </div>
            <ul class="nav-x col-9">
                <li class="design">
                  <a href="../../../design/index.html" 
                  zh-TW-lang="設計"
                  zh-CN-lang="设计"
                  ru-lang="Проектирование"
                  ko-lang="디자인"
                  ja-lang="設計"
                  es-lang="Diseñar"               
                  >设计</a></li>
                <li class="develop"><a href="../../../develop/index.html" class="selected"
                  zh-TW-lang="開發"
                  zh-CN-lang="开发"
                  ru-lang="Разработка"
                  ko-lang="개발"
                  ja-lang="開発"
                  es-lang="Desarrollar"               
                  >开发</a></li>
                <li class="distribute last"><a href="../../../distribute/index.html" 
                  zh-TW-lang="發佈"
                  zh-CN-lang="分发"
                  ru-lang="Распространение"
                  ko-lang="배포"
                  ja-lang="配布"
                  es-lang="Distribuir"               
                  >分发</a></li>
            </ul>
            
            <!-- New Search -->
            <div class="menu-container">
            <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Links</div>
      <ul>
        <li><a href="https://play.google.com/apps/publish/">Google Play Developer Console</a></li>
        <li><a href="http://android-developers.blogspot.com/">Android Developers Blog</a></li>
        <li><a href="../../../about/index.html">About Android</a></li>
      </ul>
      <div class="header">Android Sites</div>
      <ul>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li class="active"><a>Android Developers</a></li>
        <li><a href="http://source.android.com">Android Open Source Project</a></li>
      </ul>
      <!-- <div class="header">Support</div>
      <ul>
        <li><a href="../../../support.html">Developer Support</a></li>
      </ul> -->
      <div class="header">Languages</div>
        <div id="language" class="locales">
          <select name="language" onChange="changeLangPref(this.value, true)">
              <option value="en">English</option>
              <option value="es">Español</option>
              <option value="ja">日本語</option>
              <option value="ko">한국어</option>
              <option value="ru">Русский</option>
              <option value="zh-CN">中文 (中国)</option>
              <option value="zh-TW">中文 (台灣)</option>
          </select>
        </div>
      <script type="text/javascript">
        <!--  
        loadLangPref();  
          //-->
      </script>
      <br class="clearfix" />
    </div>
    <div class="bottom"></div>
  </div>
  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
onkeydown="return search_changed(event, true, '../../../')" 
onkeyup="return search_changed(event, false, '../../../')" />
      </form>
      <div class="right"></div>
        <a class="close hide">close</a>
        <div class="left"></div>
        <div class="right"></div>
    </div>
  </div>
  <div id="search_filtered_wrapper">
    <div id="search_filtered_div" class="no-display">
        <ul id="search_filtered">
        </ul>
    </div>
  </div>
  
  </div>
  <!-- /New Search>
          
          
          <!-- Expanded quicknav -->
           <div id="quicknav" class="col-9">
                <ul>
                    <li class="design">
                      <ul>
                        <li><a href="../../../design/index.html">开始</a></li>
                        <li><a href="../../../design/style/index.html">Style</a></li>
                        <li><a href="../../../design/patterns/index.html">Patterns</a></li>
                        <li><a href="../../../design/building-blocks/index.html">Building Blocks</a></li>
                        <li><a href="../../../design/downloads/index.html">Downloads</a></li>
                        <li><a href="../../../design/videos/index.html">Videos</a></li>
                      </ul>
                    </li>
                    <li class="develop">
                      <ul>
                        <li><a href="../../../training/index.html"
                          zh-TW-lang="訓練課程"
                          zh-CN-lang="培训"
                          ru-lang="Курсы"
                          ko-lang="교육"
                          ja-lang="トレーニング"
                          es-lang="Capacitación"               
                          >训练</a></li>
                        <li><a href="../../../guide/components/index.html"
                          zh-TW-lang="API 指南"
                          zh-CN-lang="API 指南"
                          ru-lang="Руководства по API"
                          ko-lang="API 가이드"
                          ja-lang="API ガイド"
                          es-lang="Guías de la API"               
                          >API 指南</a></li>
                        <li><a href="../../../reference/packages.html"
                          zh-TW-lang="參考資源"
                          zh-CN-lang="参考"
                          ru-lang="Справочник"
                          ko-lang="참조문서"
                          ja-lang="リファレンス"
                          es-lang="Referencia"               
                          >参考</a></li>
                        <li><a href="../../../tools/index.html"
                          zh-TW-lang="相關工具"
                          zh-CN-lang="工具"
                          ru-lang="Инструменты"
                          ko-lang="도구"
                          ja-lang="ツール"
                          es-lang="Herramientas"               
                          >工具</a>
                          <ul><li><a href="../../../sdk/index.html">Get the
SDK</a></li></ul>
                        </li>
                      </ul>
                    </li>
                    <li class="distribute last">
                      <ul>
                        <li><a href="../../../distribute/index.html">Google Play</a></li>
                        <li><a href="../../../distribute/googleplay/publish/index.html">Publishing</a></li>
                        <li><a href="../../../distribute/googleplay/promote/index.html">Promoting</a></li>
                        <li><a href="../../../distribute/googleplay/quality/index.html">App Quality</a></li>
                        <li><a href="../../../distribute/googleplay/spotlight/index.html">Spotlight</a></li>
                        <li><a href="../../../distribute/open.html">Open Distribution</a></li>
                      </ul>
                    </li>
                </ul>
          </div>
          <!-- /Expanded quicknav -->
        </div>
    </div>
    <!-- /Header -->
    
    
  <div id="searchResults" class="wrap" style="display:none;">
          <h2 id="searchTitle">Results</h2>
          <div id="leftSearchControl" class="search-control">Loading...</div>
  </div>
    
    
    

    <!-- Secondary x-nav -->
    <div id="nav-x">
        <div class="wrap">
            <ul class="nav-x col-9 develop" style="width:75%">
                <li><a href="../../../training/index.html" 
                  zh-TW-lang="訓練課程"
                  zh-CN-lang="培训"
                  ru-lang="Курсы"
                  ko-lang="교육"
                  ja-lang="トレーニング"
                  es-lang="Capacitación"               
                  >训练</a></li>
                <li><a href="../../../guide/components/index.html" class="selected"
                  zh-TW-lang="API 指南"
                  zh-CN-lang="API 指南"
                  ru-lang="Руководства по API"
                  ko-lang="API 가이드"
                  ja-lang="API ガイド"
                  es-lang="Guías de la API"               
                  >API 指南</a></li>
                <li><a href="../../../reference/packages.html" 
                  zh-TW-lang="參考資源"
                  zh-CN-lang="参考"
                  ru-lang="Справочник"
                  ko-lang="참조문서"
                  ja-lang="リファレンス"
                  es-lang="Referencia"               
                  >参考</a></li>
                <li><a href="../../../tools/index.html" 
                  zh-TW-lang="相關工具"
                  zh-CN-lang="工具"
                  ru-lang="Инструменты"
                  ko-lang="도구"
                  ja-lang="ツール"
                  es-lang="Herramientas"               
                  >工具</a></li>
            </ul>
        </div>
        
    </div>
    <!-- /Sendondary x-nav -->

  

  <div class="wrap clearfix" id="body-content">
    <div class="col-4" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">
<a class="totop" href="#top" data-g-event="left-nav-top">to top</a>



<ul id="nav">
  <!--  Walkthrough for Developers -- quick overview of what it's like to develop on Android -->
  <!--<li style="color:red">概览</li> -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/components/index.html">
        <span class="en">应用组件</span>
      </a></div>
    <ul>
      <li><a href="../../../guide/components/fundamentals.html">
            <span class="en">应用基础</span></a>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/components/activities.html">
            <span class="en">Activities</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/components/fragments.html">
              <span class="en">Fragments</span>
            </a></li>
          <li><a href="../../../guide/components/loaders.html">
              <span class="en">Loaders</span>
            </a></li>
          <li><a href="../../../guide/components/tasks-and-back-stack.html">
              <span class="en">任务和后退栈</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/components/services.html">
            <span class="en">Services</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/components/bound-services.html">
              <span class="en">Bound Services</span>
            </a></li>
          <li><a href="../../../guide/components/aidl.html">
              <span class="en">AIDL</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/providers/content-providers.html">
            <span class="en">内容提供器</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/topics/providers/content-provider-basics.html">
              <span class="en">Content Provider Basics</span>
            </a></li>
          <li><a href="../../../guide/topics/providers/content-provider-creating.html">
              <span class="en">Creating a Content Provider</span>
            </a></li>
          <li><a href="../../../guide/topics/providers/calendar-provider.html">
              <span class="en">Calendar Provider</span>
            </a></li>
          <li><a href="../../../guide/topics/providers/contacts-provider.html">
              <span class="en">Contacts Provider</span>
            </a></li>
        </ul>
      </li>
      <li><a href="../../../guide/components/intents-filters.html">
          <span class="en">Intents和Intent过滤器</span>
        </a></li>
      <li><a href="../../../guide/components/processes-and-threads.html">
          <span class="en">进程和线程</span>
        </a>
      </li>
      <li><a href="../../../guide/topics/security/permissions.html">
          <span class="en">权限体系</span>
        </a>
      </li>
      <li><a href="../../../guide/topics/appwidgets/index.html">
            <span class="en">应用小部件</span>
          </a></li>
      <li class="nav-section">
      <div class="nav-section-header"><a href="../../../guide/topics/manifest/manifest-intro.html">
          <span class="en">Android Manifest</span>
        </a></div>
        <ul>
          <li><a href="../../../guide/topics/manifest/action-element.html">&lt;action&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/activity-element.html">&lt;activity&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/activity-alias-element.html">&lt;activity-alias&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/application-element.html">&lt;application&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/category-element.html">&lt;category&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/compatible-screens-element.html">&lt;compatible-screens&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/data-element.html">&lt;data&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/grant-uri-permission-element.html">&lt;grant-uri-permission&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/instrumentation-element.html">&lt;instrumentation&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/intent-filter-element.html">&lt;intent-filter&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/manifest-element.html">&lt;manifest&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/meta-data-element.html">&lt;meta-data&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/path-permission-element.html">&lt;path-permission&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/permission-element.html">&lt;permission&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/permission-group-element.html">&lt;permission-group&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/permission-tree-element.html">&lt;permission-tree&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/provider-element.html">&lt;provider&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/receiver-element.html">&lt;receiver&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/service-element.html">&lt;service&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/supports-gl-texture-element.html">&lt;supports-gl-texture&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/supports-screens-element.html">&lt;supports-screens&gt;</a></li><!-- ##api level 4## -->
          <li><a href="../../../guide/topics/manifest/uses-configuration-element.html">&lt;uses-configuration&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/uses-feature-element.html">&lt;uses-feature&gt;</a></li> <!-- ##api level 4## -->
          <li><a href="../../../guide/topics/manifest/uses-library-element.html">&lt;uses-library&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/uses-permission-element.html">&lt;uses-permission&gt;</a></li>
          <li><a href="../../../guide/topics/manifest/uses-sdk-element.html">&lt;uses-sdk&gt;</a></li>
        </ul>
   </li><!-- end of the manifest file -->

    </ul>
  </li>

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/topics/ui/index.html">
        <span class="en">用户界面</span>
      </a></div>
    <ul>
      <li><a href="../../../guide/topics/ui/overview.html">
          <span class="en">概览</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/ui/declaring-layout.html">
            <span class="en">Layouts</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/topics/ui/layout/linear.html">
              <span class="en">Linear Layout</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/layout/relative.html">
              <span class="en">Relative Layout</span>
            </a></li>
       <!--
          <li><a href="../../../guide/topics/ui/layout/grid.html">
              <span class="en">Grid Layout</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/layout/tabs.html">
              <span class="en">Tab Layout</span>
            </a></li>
       -->
          <li><a href="../../../guide/topics/ui/layout/listview.html">
              <span class="en">List View</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/layout/gridview.html">
              <span class="en">Grid View</span>
            </a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/ui/controls.html">
            <span class="en">Input Controls</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/topics/ui/controls/button.html">
              <span class="en">Buttons</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/text.html">
              <span class="en">Text Fields</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/checkbox.html">
              <span class="en">Checkboxes</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/radiobutton.html">
              <span class="en">Radio Buttons</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/togglebutton.html">
              <span class="en">Toggle Buttons</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/spinner.html">
              <span class="en">Spinners</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/controls/pickers.html">
              <span class="en">Pickers</span>
            </a></li>
<!--
          <li><a href="../../../guide/topics/ui/controls/progress.html">
              <span class="en">Seek and Progress Bars</span>
            </a></li>
-->
        </ul>
      </li>
      <li><a href="../../../guide/topics/ui/ui-events.html">
          <span class="en">Input Events</span>
        </a></li>
      <li><a href="../../../guide/topics/ui/menus.html">
          <span class="en">Menus</span></span>
          </a></li>
      <li><a href="../../../guide/topics/ui/actionbar.html">
           <span class="en">Action Bar</span>
          </a></li>
      <li><a href="../../../guide/topics/ui/settings.html">
            <span class="en">Settings</span>
          </a></li>
      <li><a href="../../../guide/topics/ui/dialogs.html">
           <span class="en">Dialogs</span>
          </a></li>
      <li><a href="../../../guide/topics/ui/notifiers/notifications.html">
          <span class="en">Notifications</span>
        </a></li>
      <li><a href="../../../guide/topics/ui/notifiers/toasts.html">
          <span class="en">Toasts</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/search/index.html">
            <span class="en">Search</span>
          </a></div>
          <ul>
            <li><a href="../../../guide/topics/search/search-dialog.html">Creating a Search Interface</a></li>
            <li><a href="../../../guide/topics/search/adding-recent-query-suggestions.html">Adding Recent Query Suggestions</a></li>
            <li><a href="../../../guide/topics/search/adding-custom-suggestions.html">Adding Custom Suggestions</a></li>
            <li><a href="../../../guide/topics/search/searchable-config.html">Searchable Configuration</a></li>
          </ul>
      </li>
      <li><a href="../../../guide/topics/ui/drag-drop.html">
          <span class="en">拖放</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/ui/accessibility/index.html">
            <span class="en">配件</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/topics/ui/accessibility/apps.html">
              <span class="en">Making Applications Accessible</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/accessibility/checklist.html">
              <span class="en">Accessibility Developer Checklist</span>
            </a></li>
          <li><a href="../../../guide/topics/ui/accessibility/services.html">
              <span class="en">Building Accessibility Services</span>
            </a></li>
        </ul>
      </li>
      <li><a href="../../../guide/topics/ui/themes.html">
          <span class="en">样式和主题</span>
        </a></li>
      <li><a href="../../../guide/topics/ui/custom-components.html">
          <span class="en">自定义组件</span>
        </a></li>
    </ul>
  </li><!-- end of 用户界面 -->

    <li class="nav-section">
      <div class="nav-section-header"><a href="../../../guide/topics/resources/index.html">
           <span class="en">应用资源</span>
         </a></div>
      <ul>
        <li><a href="../../../guide/topics/resources/overview.html">
            <span class="en">概览</span>
          </a></li>
          <li><a href="../../../guide/topics/resources/providing-resources.html">
            <span class="en">资源提供</span>
          </a></li>
        <li><a href="../../../guide/topics/resources/accessing-resources.html">
            <span class="en">访问资源</span>
          </a></li>
        <li><a href="../../../guide/topics/resources/runtime-changes.html">
              <span class="en">处理运行时变化</span>
            </a></li>
        <li><a href="../../../guide/topics/resources/localization.html">
            <span class="en">本地化</span>
          </a></li>
        <li class="nav-section">
          <div class="nav-section-header"><a href="../../../guide/topics/resources/available-resources.html">
              <span class="en">资源类型</span>
            </a></div>
          <ul>
            <li><a href="../../../guide/topics/resources/animation-resource.html">Animation</a></li>
            <li><a href="../../../guide/topics/resources/color-list-resource.html">Color State List</a></li>
            <li><a href="../../../guide/topics/resources/drawable-resource.html">Drawable</a></li>
            <li><a href="../../../guide/topics/resources/layout-resource.html">Layout</a></li>
            <li><a href="../../../guide/topics/resources/menu-resource.html">Menu</a></li>
            <li><a href="../../../guide/topics/resources/string-resource.html">String</a></li>
            <li><a href="../../../guide/topics/resources/style-resource.html">Style</a></li>
            <li><a href="../../../guide/topics/resources/more-resources.html">More Types</a></li>
          </ul>
        </li><!-- end of resource types -->
      </ul>
    </li><!-- end of app resources -->

   <li class="nav-section">
      <div class="nav-section-header"><a href="../../../guide/topics/graphics/index.html">
          <span class="en">动画和图形</span>
        </a></div>
      <ul>
      <li class="nav-section">
        <li><a href="../../../guide/topics/graphics/overview.html">
            <span class="en">概览</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/prop-animation.html">
            <span class="en">Property Animation</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/view-animation.html">
            <span class="en">View Animation</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/drawable-animation.html">
            <span class="en">Drawable Animation</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/2d-graphics.html">
            <span class="en">Canvas and Drawables</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/opengl.html">
            <span class="en">OpenGL</span>
          </a></li>
        <li><a href="../../../guide/topics/graphics/hardware-accel.html">
            <span class="en">硬件加速</span>
          </a></li>
       </ul>
    </li><!-- end of graphics and animation-->

   <li class="nav-section">
            <div class="nav-section-header"><a href="../../../guide/topics/renderscript/index.html">
              <span class="en">计算</span>
            </a></div>
            <ul>
              <li><a href="../../../guide/topics/renderscript/compute.html">
                    <span class="en">Renderscript</span></a>
                  </li>

              <li><a href="../../../guide/topics/renderscript/advanced.html">
                    <span class="en">Advanced Renderscript</span></a>
                  </li>
              <li><a href="../../../guide/topics/renderscript/reference.html">
                    <span class="en">运行时API手册</span></a>
              </li>
             </ul>
   </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="../../../guide/topics/media/index.html">
            <span class="en">媒体和摄像头</span>
          </a></div>
          <ul>
            <li><a href="../../../guide/topics/media/mediaplayer.html">
                  <span class="en">播放媒体</span></a>
                </li>
            <li><a href="../../../guide/appendix/media-formats.html">
                   <span class="en">支持媒体类型</span></a>
                </li>
            <li><a href="../../../guide/topics/media/audio-capture.html">
                  <span class="en">捕获音频</span></a>
                </li>
            <li><a href="../../../guide/topics/media/jetplayer.html">
                  <span class="en">JetPlayer</span></a>
                </li>
            <li><a href="../../../guide/topics/media/camera.html">
                  <span class="en">相机</span></a>
                </li>
          </ul>
      </li><!-- end of media and camera -->

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/sensors/index.html">
              <span class="en">定位和传感器</span>
              </a></div>
        <ul>
          <li><a href="../../../guide/topics/location/index.html">
               <span class="en">定位和地图</span>
             </a>
          <li><a href="../../../guide/topics/location/strategies.html">
               <span class="en">Location Strategies</span>
             </a></li>
          <li><a href="../../../guide/topics/sensors/sensors_overview.html">
              <span class="en">Sensors 概览</span>
            </a></li>
          <li><a href="../../../guide/topics/sensors/sensors_motion.html">
              <span class="en">动作传感器</span>
            </a></li>
          <li><a href="../../../guide/topics/sensors/sensors_position.html">
              <span class="en">位置传感器</span>
            </a></li>
          <li><a href="../../../guide/topics/sensors/sensors_environment.html">
              <span class="en">环境传感器</span>
            </a></li>
        </ul>
      </li><!-- end of location and sensors -->



      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/connectivity/index.html">
               <span class="en">链接</span>
             </a></div>
        <ul>
          <li><a href="../../../guide/topics/connectivity/bluetooth.html">
              <span class="en">蓝牙</span>
            </a>
          </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/connectivity/nfc/index.html">
          <span class="en">NFC</span></a>
        </div>
        <ul>
          <li><a href="../../../guide/topics/connectivity/nfc/nfc.html">NFC Basics</a></li>
          <li><a href="../../../guide/topics/connectivity/nfc/advanced-nfc.html">Advanced NFC</a></li>
        </ul>
      </li>
      <li><a href="../../../guide/topics/connectivity/wifip2p.html">
            <span class="en">Wi-Fi Direct</span></a>
          </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="../../../guide/topics/connectivity/usb/index.html">
            <span class="en">USB</span></a>
          </div>
            <ul>
              <li><a href="../../../guide/topics/connectivity/usb/accessory.html">Accessory</a></li>
              <li><a href="../../../guide/topics/connectivity/usb/host.html">Host</a></li>
            </ul>
     </li>
     <li><a href="../../../guide/topics/connectivity/sip.html">
            <span class="en">SIP</span>
          </a>
     </li>

    </ul>
  </li><!-- end of connectivity -->

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/topics/text/index.html">
            <span class="en">文本和输入</span>
        </a></div>
        <ul>
          <li><a href="../../../guide/topics/text/copy-paste.html">
              <span class="en">Copy and Paste</span>
            </a></li>
          <li><a href="../../../guide/topics/text/creating-input-method.html">
              <span class="en">Creating an IME</span>
            </a></li>
          <li><a href="../../../guide/topics/text/spell-checker-framework.html">
              <span class="en">Spelling Checker</span>
            </a></li>
        </ul>
      </li><!-- end of text and input -->

     <li class="nav-section">
      <div class="nav-section-header"><a href="../../../guide/topics/data/index.html">
          <span class="en">数据存储</span>
        </a></div>
      <ul>
         <li><a href="../../../guide/topics/data/data-storage.html">
            <span class="en">Storage Options</span>
           </a></li>
        <li><a href="../../../guide/topics/data/backup.html">
            <span class="en">Data Backup</span>
          </a></li>
        <li><a href="../../../guide/topics/data/install-location.html">
            <span class="en">App Install Location</span>
          </a></li>
      </ul>
    </li><!-- end of data storage -->


  <li class="nav-section">
           <div class="nav-section-header"><a href="../../../guide/topics/admin/index.html">
               <span class="en">管理</span>
             </a></div>
           <ul>
              <li>
                <a href="../../../guide/topics/admin/device-admin.html">
                <span class="en">Device Policies</span></a>
              </li>
            <!--
              <li>
                <a href="../../../guide/topics/admin/keychain.html">
                <span class="en">Certificate Store</span></a>
              </li>
            -->
           </ul>
  </li><!-- end of administration -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/webapps/index.html">
    <span class="en">网页应用</span>
    </a></div>
    <ul>
      <li><a href="../../../guide/webapps/overview.html">
            <span class="en">概览</span>
          </a></li>
      <li><a href="../../../guide/webapps/targeting.html">
            <span class="en">Targeting Screens from 网页应用</span>
          </a></li>
      <li><a href="../../../guide/webapps/webview.html">
            <span class="en">在WebView中创建网页应用</span>
          </a></li>
      <li><a href="../../../guide/webapps/debugging.html">
            <span class="en">网页应用Debug</span>
          </a></li>
      <li><a href="../../../guide/webapps/best-practices.html">
            <span class="en">网页应用的最佳实践</span>
          </a></li>
    </ul>
  </li><!-- end of web apps -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/practices/index.html">
      <span class="en">最佳实践</span>
      <span class="de" style="display:none">Bewährte Verfahren</span>
      <span class="es" style="display:none">Prácticas recomendadas</span>
      <span class="fr" style="display:none">Meilleures pratiques</span>
      <span class="it" style="display:none">Best practice</span>
      <span class="ja" style="display:none">ベスト プラクティス</span>
      <span class="zh-CN" style="display:none">最佳实践</span>
      <span class="zh-TW" style="display:none">最佳實務</span>
    </div></a>
    <ul>
      <li><a href="../../../guide/practices/compatibility.html">
            <span class="en">Compatibility</span>
          </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/practices/screens_support.html">
          <span class="en">Supporting Multiple Screens</span>
        </a></div>
        <ul>
          <li><a href="../../../guide/practices/screens-distribution.html">
            <span class="en">Distributing to Specific Screens</span>
          </a></li>
          <li><a href="../../../guide/practices/screen-compat-mode.html">
            <span class="en">Screen Compatibility Mode</span>
          </a></li>
          <!--<li><a href="../../../guide/practices/screens-support-1.5.html">
            <span class="en">Strategies for Android 1.5</span>
          </a></li> -->
        </ul>
      </li>
      <li><a href="../../../guide/practices/tablets-and-handsets.html">
            <span class="en">Supporting Tablets and Handsets</span>
          </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/practices/performance.html">
            <span class="en">Designing for Performance</span>
          </a></div>
        <ul>
          <li><a href="../../../guide/practices/jni.html">
                <span class="en">JNI Tips</span>
              </a></li>
        </ul>
      </li>
      <li><a href="../../../guide/practices/responsiveness.html">
            <span class="en">Designing for Responsiveness</span>
          </a></li>
      <li><a href="../../../guide/practices/seamlessness.html">
            <span class="en">Designing for Seamlessness</span>
          </a></li>
        <li><a href="../../../guide/practices/security.html">
            <span class="en">Designing for Security</span>
          </a></li>

    </ul>
  </li>


  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/google/index.html">
        <span class="en">Google服务</span>
      </a></div>
    <ul>

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/google/play/billing/index.html">
            <span class="en">In-app Billing</span></a>
        </div>
        <ul>
          <li><a href="../../../guide/google/play/billing/billing_overview.html">
              <span class="en">In-app Billing 概览</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_integrate.html">
              <span class="en">Implementing In-app Billing</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_subscriptions.html">
              <span class="en">Subscriptions</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_best_practices.html">
              <span class="en">Security and Design</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_testing.html">
              <span class="en">Testing In-app Billing</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_admin.html">
              <span class="en">Administering In-app Billing</span></a>
          </li>
          <li><a href="../../../guide/google/play/billing/billing_reference.html">
              <span class="en">In-app Billing Reference</span></a>
          </li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/google/play/licensing/index.html">
          <span class="en">Application Licensing</span></a>
        </div>
        <ul>
          <li><a href="../../../guide/google/play/licensing/overview.html">
              <span class="en">Licensing 概览</span></a>
          </li>
          <li><a href="../../../guide/google/play/licensing/setting-up.html">
              <span class="en">Setting Up for Licensing</span></a>
          </li>
          <li><a href="../../../guide/google/play/licensing/adding-licensing.html">
              <span class="en">Adding Licensing to Your App</span></a>
          </li>
          <li><a href="../../../guide/google/play/licensing/licensing-reference.html">
              <span class="en">Licensing Reference</span></a>
          </li>
        </ul>
      </li>
      <li><a href="../../../guide/google/play/services.html">
          <span class="en">Google Play Services</span></a>
      </li>
       <li><a href="../../../guide/google/play/filters.html">
          <span class="en">Filters on Google Play</span></a>
      </li>
      <li><a href="../../../guide/google/play/publishing/multiple-apks.html">
          <span class="en">Multiple APK Support</span></a>
      </li>
      <li><a href="../../../guide/google/play/expansion-files.html">
          <span class="en">APK Expansion Files</span></a>
      </li>

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/google/gcm/index.html">
          <span class="en">Google Cloud Messaging</span></a>
        </div>
        <ul>
          <li><a href="../../../guide/google/gcm/gs.html">
              <span class="en">Getting Started</span></a>
          </li>
          <li><a href="../../../guide/google/gcm/gcm.html">
              <span class="en">Architectural 概览</span></a>
          </li>
          <li><a href="../../../guide/google/gcm/demo.html">
              <span class="en">Demo App Tutorial</span></a>
          </li>
          <li><a href="../../../guide/google/gcm/adv.html">
              <span class="en">Advanced Topics</span></a>
          </li>
          <li><a href="../../../guide/google/gcm/c2dm.html">
              <span class="en">Migration</span></a>
          </li>
        </ul>
      </li>

    </ul>
  </li><!-- end Google Play -->



      <!-- this needs to move
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../../guide/practices/ui_guidelines/index.html">
               <span class="en">UI Guidelines</span>
             </a></div>
        <ul>
          <li class="nav-section">
            <div class="nav-section-header"><a href="../../../guide/practices/ui_guidelines/icon_design.html">
                   <span class="en">Icon Design</span>
                 </a></div>
            <ul>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_launcher.html">
                    <span class="en">Launcher Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_menu.html">
                    <span class="en">Menu Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_action_bar.html">
                    <span class="en">Action Bar Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_status_bar.html">
                    <span class="en">Status Bar Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_tab.html">
                    <span class="en">Tab Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_dialog.html">
                    <span class="en">Dialog Icons</span>
                  </a></li>
              <li><a href="../../../guide/practices/ui_guidelines/icon_design_list.html">
                    <span class="en">List View Icons</span>
                  </a></li>
            </ul>
          </li>
          <li><div><a href="../../../guide/practices/ui_guidelines/widget_design.html">
                <span class="en">App Widget Design</span>
              </a></div>
          </li>
        </ul>
      </li>
        </ul> -->

<!-- Remove
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../guide/appendix/index.html">
        <span class="en">Appendix</span>
        <span class="de" style="display:none">Anhang</span>
        <span class="es" style="display:none">Apéndice</span>
        <span class="fr" style="display:none">Annexes</span>
        <span class="it" style="display:none">Appendice</span>
        <span class="ja" style="display:none">付録</span>
        <span class="zh-CN" style="display:none">附录</span>
        <span class="zh-TW" style="display:none">附錄</span>
      </a></div>
    <ul>
      <li><a href="../../../guide/appendix/g-app-intents.html">
            <span class="en">Intents List: Google Apps</span>
          </a></li>


      <li><a href="../../../guide/appendix/glossary.html">
            <span class="en">Glossary</span>
          </a></li>
    </ul>
  </li>

</li>
-->
</ul>


<script type="text/javascript">
<!--
    buildToggleLists();
    changeNavLang(getLangPref());
//-->
</script>


        

      </div>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>

    <script>
      $(document).ready(function() {
        changeDocLang(getLangPref());
        });
    </script>



<div class="col-12" id="doc-col" >


  
    
      <h1 itemprop="name">Creating an Input Method</h1>
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
<div id="qv">
<h2>同时查看</h2>
<ol>
    <li>
        <a href="http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html">Onscreen Input Methods</a>
    </li>
    <li>
        <a href="../../../resources/samples/SoftKeyboard/index.html">Soft Keyboard sample</a>
    </li>
</ol>
</div>
</div>
<p>
    An input method editor (IME) is a user control that enables users to enter text. Android 
    provides an extensible input method framework that allows applications to provide users 
    alternative input methods, such as on-screen keyboards or even speech input. Once installed, 
    users can select which IME they want to use from the system settings and use it across the 
    entire system; only one IME may be enabled at a time.
</p>
<p>
    To add an IME to the Android system, you create an Android application
    containing a class that extends <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html">InputMethodService</a></code>. In 
    addition, you usually create a "settings" activity that passes options to the IME
    service. You can also define a settings UI that's displayed as part of the system settings.
</p>
<p>This article covers the following:</p>
<ul>
    <li>The IME lifecycle.</li>
    <li>Declaring IME components in the application manifest.</li>
    <li>The IME API.</li>
    <li>Designing an IME UI.</li>
    <li>Sending text from an IME to an application.</li>
    <li>Working with IME subtypes.</li>
</ul>
<p>
    If you haven't worked with IMEs before, you should read the introductory article 
    <a href="http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html">Onscreen Input Methods</a> first.
    Also, the Soft Keyboard sample app included in the SDK contains sample code that you can modify
    to start building your own IME.
</p>
<h2 id="InputMethodLifecycle">The IME Lifecycle</h2>
<p>
    The following diagram describes the life cycle of an IME:
</p>
<img src="../../../resources/articles/images/inputmethod_lifecycle_image.png" alt="" height="845"
    id="figure1" />
<p class="img-caption">
    <strong>Figure 1.</strong> The life cycle of an IME.
</p>
<p>
    The following sections describe how to implement the UI and code associated with an IME that
    follows this lifecycle.
</p>
<h2 id="DefiningIME">Declaring IME Components in the Manifest</h2>
<p>
    In the Android system, an IME is an Android application that contains a special IME service.
    The application's manifest file must declare the service, request the necessary permissions, 
    provide an intent filter that matches the action <code>action.view.InputMethod</code>, and 
    provide metadata that defines characteristics of the IME. In addition, to provide a settings
    interface that allows the user to modify the behavior of the IME, you can define a "settings"
    activity that can be launched from System Settings.
</p>
<p>
    The following snippet declares IME service. It requests the permission <code><a href="../../../reference/android/Manifest.permission.html#BIND_INPUT_METHOD">BIND_INPUT_METHOD</a></code> to allow the service to connect the IME to 
    the system, sets up an intent filter that matches the action 
    <code>android.view.InputMethod</code>, and defines metadata for the IME:
</p>
<pre>
&lt;!-- Declares the input method service --&gt;
    &lt;service android:name="FastInputIME"
        android:label="&#64;string/fast_input_label"
        android:permission="android.permission.BIND_INPUT_METHOD"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.view.InputMethod" /&gt;
        &lt;/intent-filter&gt;
        &lt;meta-data android:name="android.view.im" android:resource="&#64;xml/method" /&gt;
    &lt;/service&gt;
</pre>
<p>
    This next snippet declares the settings activity for the IME. It has an intent filter for
    <code><a href="../../../reference/android/content/Intent.html#ACTION_MAIN">ACTION_MAIN</a></code> that indicates this activity is the main entry point
    for the IME application:</p>
<pre>
    &lt;!-- Optional: an activity for controlling the IME settings --&gt;
    &lt;activity android:name="FastInputIMESettings" 
        android:label="&#64;string/fast_input_settings"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN"/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
</pre>
<p>
    You can also provide access to the IME's settings directly from its UI.
</p>
<h2 id="IMEAPI">The Input Method API</h2>
<p>
    Classes specific to IMEs are found in the <code><a href="../../../reference/android/inputmethodservice/package-summary.html">android.inputmethodservice</a></code> and <code><a href="../../../reference/android/view/inputmethod/package-summary.html">android.view.inputmethod</a></code> packages. The <code><a href="../../../reference/android/view/KeyEvent.html">KeyEvent</a></code> class is important for
    handling keyboard characters.
</p>
<p>
    The central part of an IME is a service component, a class that extends 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html">InputMethodService</a></code>. In addition to implementing the 
    normal service lifecycle, this class has callbacks for providing your IME's UI, handling user 
    input, and delivering text to the field that currently has focus. By default, the
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html">InputMethodService</a></code> class provides most of the implementation 
    for managing the state and visibility of the IME and communicating with the current 
    input field.
</p>
<p>
    The following classes are also important:
</p>
<dl>
    <dt><code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html">BaseInputConnection</a></code></dt>
    <dd>
        Defines the communication channel from an <code><a href="../../../reference/android/view/inputmethod/InputMethod.html">InputMethod</a></code>
        back to the application that is receiving its input. You use it to read text around the
        cursor, commit text to the text box, and send raw key events to the application.
        Applications should extend this class rather than implementing the base interface 
        <code><a href="../../../reference/android/view/inputmethod/InputConnection.html">InputConnection</a></code>.
    </dd>
    <dt><code><a href="../../../reference/android/inputmethodservice/KeyboardView.html">KeyboardView</a></code></dt>
    <dd>
        An extension of <code><a href="../../../reference/android/view/View.html">View</a></code> that renders a keyboard and responds to user
        input events. The keyboard layout is specified by an instance of 
        <code><a href="../../../reference/android/inputmethodservice/Keyboard.html">Keyboard</a></code>, which you can define in an XML file.
    </dd>
</dl>
<h2 id="IMEUI">Designing the Input Method UI</h2>
<p>
    There are two main visual elements for an IME: the <strong>input</strong> view and the
    <strong>candidates</strong> view. You only have to implement the elements that are relevant to
    the input method you're designing.
</p>
<h3 id="InputView">Input view</h3>
<p>
    The input view is the UI where the user inputs text, in the form of keyclicks, handwriting or
    gestures. When the iIME is displayed for the first time, the system calls the 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onCreateInputView()">onCreateInputView()</a></code> callback. In your
    implementation of this method, you create the layout you want to display in the IME
    window and return the layout to the system. This snippet is an example of implementing the
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onCreateInputView()">onCreateInputView()</a></code> method:
<pre>
    &#64;Override 
    public View onCreateInputView() { 
        MyKeyboardView inputView = 
            (MyKeyboardView) getLayoutInflater().inflate( R.layout.input, null);
    
        inputView.setOnKeyboardActionListener(this); inputView.setKeyboard(mLatinKeyboard); 
        
        return mInputView; 
    } 
</pre>
<p>
    In this example, <code>MyKeyboardView</code> is an instance of a custom implementation of 
    <code><a href="../../../reference/android/inputmethodservice/KeyboardView.html">KeyboardView</a></code> that renders a 
    <code><a href="../../../reference/android/inputmethodservice/Keyboard.html">Keyboard</a></code>. If you’re building a traditional QWERTY keyboard, 
    see the  Soft Keyboard <a href="../../../tools/samples/index.html">sample 
    app</a> for an example of how to extend the <code><a href="../../../reference/android/inputmethodservice/KeyboardView.html">KeyboardView</a></code> class.
</p>
<h3 id="CandidateView">Candidates view</h3>
<p>
    The candidates view is the UI where the IME displays potential word corrections or
    suggestions for the user to select. In the IME lifecycle, the system calls 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onCreateCandidatesView()">onCreateCandidatesView()</a></code> when it's ready 
    to display the candidate view. In your implementation of this method, return a layout that shows
    word suggestions, or return null if you don’t want to show anything (a null response is the
    default behavior, so you don’t have to implement this if you don’t provide suggestions).</p>
<p>
    For an example implementation that provides user suggestions, see the 
    Soft Keyboard <a href="../../../tools/samples/index.html">sample 
    app</a>.
</p>
<h3 id="DesignConsiderations">UI design considerations</h3>
<p>
    This section describes some specific UI design considerations for IMEs.
</p>
<h4>Handling multiple screen sizes</h4>
<p>
    The UI for your IME must be able to scale for different screen sizes, and it also
    must handle both landscape and portrait orientations. In non-fullscreen IME mode, leave
    sufficient space for the application to show the text field and any associated context, so that
    no more than half the screen is occupied by the IME. In fullscreen IME mode this is not an
    issue.
</p>
<h4>Handling different input types</h4>
<p>
    Android text fields allow you to set a specific input type, such as free form text, numbers,
    URLs, email addresses, and search strings. When you implement a new IME, you need to
    detect the input type of each field and provide the appropriate interface for it. However, you
    don't have to set up your IME to check that the user entered text that's valid for the
    input type; that's the responsibility of the application that owns the text field.
</p>
<p>
    For example, here are screenshots of the interfaces that the Latin IME provided with the
    Android platform provides for text and phone number inputs:
</p>
<img src="../../../resources/articles/images/inputmethod_text_type_screenshot.png" alt=""
    height="142" id="figure2" />
<img src="../../../resources/articles/images/inputmethod_numeric_type_screenshot.png" alt=""
    height="120" id="figure2a" />
<p class="img-caption">
    <strong>Figure 2.</strong> Latin IME input types.
</p>
<p>
    When an input field receives focus and your IME starts, the system calls 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onStartInputView(android.view.inputmethod.EditorInfo, boolean)">onStartInputView()</a></code>, passing in an <code><a href="../../../reference/android/view/inputmethod/EditorInfo.html">EditorInfo</a></code> object that 
    contains details about the input type and other attributes of the text field. In this object, 
    the <code><a href="../../../reference/android/view/inputmethod/EditorInfo.html#inputType">inputType</a></code> field contains the text field's input
    type.
</p>
<p>
    The <code><a href="../../../reference/android/view/inputmethod/EditorInfo.html#inputType">inputType</a></code> field is an <code>int</code>
    that contains bit patterns for various input type settings. To test it for the text field's
    input type, mask it with the constant <code><a href="../../../reference/android/text/InputType.html#TYPE_MASK_CLASS">TYPE_MASK_CLASS</a></code>, like
    this:
</p>
<pre>
inputType &amp; InputType.TYPE_MASK_CLASS 
</pre>
<p>
The input type bit pattern can have one of several values, including:
</p>
<dl>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_NUMBER">TYPE_CLASS_NUMBER</a></code></dt>
    <dd>
        A text field for entering numbers. As illustrated in the previous screen shot, the
        Latin IME displays a number pad for fields of this type.
    </dd>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_DATETIME">TYPE_CLASS_DATETIME</a></code></dt>
    <dd>
        A text field for entering a date and time.
    </dd>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_PHONE">TYPE_CLASS_PHONE</a></code></dt>
    <dd>
        A text field for entering telephone numbers.
    </dd>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code></dt>
    <dd>
        A text field for entering all supported characters.
    </dd>
</dl>
<p>
    These constants are described in more detail in the reference documentation for 
    <code><a href="../../../reference/android/text/InputType.html">InputType</a></code>.
</p>
<p>
    The <code><a href="../../../reference/android/view/inputmethod/EditorInfo.html#inputType">inputType</a></code> field can contain other bits that
    indicate a variant of the text field type, such as:
</p>
<dl>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_TEXT_VARIATION_PASSWORD">TYPE_TEXT_VARIATION_PASSWORD</a></code></dt>
    <dd>
        A variant of <code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering passwords. The
        input method will display dingbats instead of the actual text.
    </dd>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_TEXT_VARIATION_URI">TYPE_TEXT_VARIATION_URI</a></code></dt>
    <dd>
        A variant of <code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering web URLs and
        other Uniform Resource Identifiers (URIs).
    </dd>
    <dt><code><a href="../../../reference/android/text/InputType.html#TYPE_TEXT_FLAG_AUTO_COMPLETE">TYPE_TEXT_FLAG_AUTO_COMPLETE</a></code></dt>
    <dd>
        A variant of <code><a href="../../../reference/android/text/InputType.html#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering text that the
        application "auto-completes" from a dictionary, search, or other facility.
    </dd>
</dl>
<p>
    Remember to mask <code><a href="../../../reference/android/view/inputmethod/EditorInfo.html#inputType">inputType</a></code> with the appropriate
    constant when you test for these variants. The available mask constants are listed in the
    reference documentation for <code><a href="../../../reference/android/text/InputType.html">InputType</a></code>.
</p>
<p class="caution">
    <strong>Caution:</strong> In your own IME, make sure you handle text correctly when you send it
    to a password field. Hide the password in your UI both in the input view and in the candidates
    view. Also remember that you shouldn't store passwords on a device. To learn more, see the <a
        href="../../../guide/practices/security.html">Designing for Security</a> guide.
</p>
<h2 id="SendText">Sending Text to the Application</h2>
<p>
    As the user inputs text with your IME, you can send text to the application by
    sending individual key events or by editing the text around the cursor in the application's text
    field. In either case, you use an instance of <code><a href="../../../reference/android/view/inputmethod/InputConnection.html">InputConnection</a></code> 
    to deliver the text. To get this instance, call 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#getCurrentInputConnection()">InputMethodService.getCurrentInputConnection()</a></code>.
</p>
<h3 id="EditingCursor">Editing the text around the cursor</h3>
<p>
    When you're handling the editing of existing text in a text field, some of the more useful
    methods in <code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html">BaseInputConnection</a></code> are:
</p>
<dl>
    <dt>
        <code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html#getTextBeforeCursor(int, int)">getTextBeforeCursor()</a></code></dt>
    <dd>
        Returns a <code><a href="../../../reference/java/lang/CharSequence.html">CharSequence</a></code> containing the number of requested characters
        before the current cursor position.
    </dd>
    <dt>
        <code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html#getTextAfterCursor(int, int)">getTextAfterCursor()</a></code>
    </dt>
    <dd>
        Returns a <code><a href="../../../reference/java/lang/CharSequence.html">CharSequence</a></code> containing the number of requested characters
        following the current cursor position.
    </dd>
    <dt>
        <code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html#deleteSurroundingText(int, int)">deleteSurroundingText()</a></code>
    </dt>
    <dd>
        Deletes the specified number of characters before and following the current cursor
        position.
    </dd>
    <dt>
        <code><a href="../../../reference/android/view/inputmethod/BaseInputConnection.html#commitText(java.lang.CharSequence, int)">commitText()</a></code>
    </dt>
    <dd>
        Commit a <code><a href="../../../reference/java/lang/CharSequence.html">CharSequence</a></code> to the text field and set a new cursor
        position.
    </dd>
</dl>
<p>
    For example, the following snippet shows how to replace the text "Fell" to the left of the
    with the text "Hello!":
</p>
<pre>
    InputConnection ic = getCurrentInputConnection();
    
    ic.deleteSurroundingText(4, 0);
    
    ic.commitText("Hello", 1);
    
    ic.commitText("!", 1);
</pre>
<h3 id="ComposeThenCommit">Composing text before committing</h3>
<p>
    If your IME does text prediction or requires multiple steps to compose a glyph or
    word, you can show the progress in the text field until the user commits the word, and then you
    can replace the partial composition with the completed text. You may give special treatment to 
    the text by adding a "span" to it when you pass it to InputConnection#setComposingText().
</p>
<p>
    The following snippet shows how to show progress in a text field:
</p>
<pre>
    InputConnection ic = getCurrentInputConnection();

    ic.setComposingText("Composi", 1);
...

    ic.setComposingText("Composin", 1);

...

    ic.commitText("Composing ", 1);
</pre>
<p>
    The following screenshots show how this appears to the user:
</p>
<img src="../../../resources/articles/images/inputmethod_composing_text_1.png" alt="" height="54"
    id="figure3a" />
<img src="../../../resources/articles/images/inputmethod_composing_text_2.png" alt="" height="53"
    id="figure3b" />
<img src="../../../resources/articles/images/inputmethod_composing_text_3.png" alt="" height="31"
    id="figure3c" />
<p class="img-caption">
    <strong>Figure 3.</strong> Composing text before committing.
</p>
<h3 id="HardwareKeyEvents">Intercepting hardware key events</h3>
<p>
    Even though the input method window doesn't have explicit focus, it receives hardware key
    events first and can choose to consume them or forward them along to the application. For
    example, you may want to consume the directional keys to navigate within your UI for candidate
    selection during composition. You may also want to trap the back key to dismiss any popups
    originating from the input method window.</p>
<p>
    To intercept hardware keys, override 
    <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onKeyDown(int, android.view.KeyEvent)">onKeyDown()</a></code>
    and <code><a href="../../../reference/android/inputmethodservice/InputMethodService.html#onKeyUp(int, android.view.KeyEvent)">onKeyUp()</a></code>. 
    See the Soft Keyboard <a href="../../../tools/samples/index.html">sample 
    app</a> for an example.
</p>
<p>
    Remember to call the <code>super()</code> method for keys you don't want to handle yourself.
</p>
<h2 id="IMESubTypes">Creating an IME Subtype</h2>
<p>
    Subtypes allow the IME to expose multiple input modes and languages supported by an IME. A 
    subtype can represent:
</p>
<ul>
    <li>A locale such as en_US or fr_FR</li>
    <li>An input mode such as voice, keyboard, or handwriting</li>
    <li>
        Other input styles, forms, or properties specific to the IME, such as 10-key or qwerty
        keyboard layouts.
    </li>
</ul>
<p>
    Basically, the mode can be any text such as "keyboard", "voice", and so forth.
</p>
<p>A subtype can also expose a combination of these.</p>
<p>
    Subtype information is used for an IME switcher dialog that's available from the notification
    bar and also for IME settings. The information also allows the framework to bring up a
    specific subtype of an IME directly. When you build an IME, use the subtype facility, because 
    it helps the user identify and switch between different IME languages and modes.
</p>
<p>
    You define subtypes in one of the input method's XML resource files, using the
    <code>&lt;subtype&gt;</code> element. The following snippet defines an IME with two 
    subtypes: a keyboard subtype for the US English locale, and another keyboard subtype for the 
    French language locale for France:
</p>
<pre>
&lt;input-method xmlns:android="http://schemas.android.com/apk/res/android"
        android:settingsActivity="com.example.softkeyboard.Settings"
        android:icon="&#64;drawable/ime_icon"
    &lt;subtype android:name="&#64;string/display_name_english_keyboard_ime"
            android:icon="&#64;drawable/subtype_icon_english_keyboard_ime"
            android:imeSubtypeLanguage="en_US"
            android:imeSubtypeMode="keyboard"
            android:imeSubtypeExtraValue="somePrivateOption=true"
    /&gt;
    &lt;subtype android:name="&#64;string/display_name_french_keyboard_ime"
            android:icon="&#64;drawable/subtype_icon_french_keyboard_ime"
            android:imeSubtypeLanguage="fr_FR"
            android:imeSubtypeMode="keyboard"
            android:imeSubtypeExtraValue="foobar=30,someInternalOption=false"
    /&gt;
    &lt;subtype android:name="&#64;string/display_name_german_keyboard_ime"
            ...
    /&gt;
/&gt;
</pre>
<p>
    To ensure that your subtypes are labeled correctly in the UI, use %s to get a subtype label
    that is the same as the subtype’s locale label. This is demonstrated in the next two snippets.
    The first snippet shows part of the input method's XML file:
</p>
<pre>
    &lt;subtype
        android:label="&#64;string/label_subtype_generic"
        android:imeSubtypeLocale="en_US"
        android:icon="&#64;drawable/icon_en_us"
        android:imeSubtypeMode="keyboard" /&gt;
</pre>
<p>
    The next snippet is part of the IME's <code>strings.xml</code> file. The string 
    resource <code>label_subtype_generic</code>, which is used by the input method UI definition to 
    set the subtype's label, is defined as:
</p>
<pre>
&lt;string name="label_subtype_generic"&gt;%s&lt;/string&gt;
</pre>
<p>
    This sets the subtype’s display name to “English (United States)” in any English language
    locale, or to the appropriate localization in other locales.
</p>
<h3 id="SubtypeProcessing">Choosing IME subtypes from the notification bar</h3>
<p>
    The Android system manages all subtypes exposed by all IMEs. IME subtypes are
    treated as modes of the IME they belong to. In the notification bar, a user can select an
    available subtype for the currently-set IME, as shown in the following screenshot:
</p>
<img src="../../../resources/articles/images/inputmethod_subtype_notification.png" alt=""
    height="85" id="figure4" />
<p class="img-caption">
    <strong>Figure 4.</strong> Choosing an IME subtype from the notification bar.
</p>
<img src="../../../resources/articles/images/inputmethod_subtype_preferences.png" alt=""
    height="165" id="figure5" />
<p class="img-caption">
    <strong>Figure 5.</strong> Setting subtype preferences in System Settings.
</p>
<h3 id="SubtypeSettings">Choosing IME subtypes from System Settings</h3>
<p>
    A user can control how subtypes are used in the “Language &amp; input” settings panel in the
    System Settings area. In the Soft Keyboard sample, the file 
    <code>InputMethodSettingsFragment.java</code> contains an implementation that 
    facilitates a subtype enabler in the IME settings. Please refer to the SoftKeyboard sample in 
    the Android SDK for more information about how to support Input Method Subtypes in your IME.
</p>
<img src="../../../resources/articles/images/inputmethod_subtype_settings.png" alt=""
    height="210" id="figure6" />
<p class="img-caption">
    <strong>Figure 6.</strong> Choosing a language for the IME.
</p>
<h2 id="GeneralDesign">General IME Considerations</h2>
<p>
    Here are some other things to consider as you're implementing your IME:
</p>
<ul>
<li>
    Provide a way for users to set options directly from the IME's UI.
</li>
<li>
    Because multiple IMEs may be installed on the device, provide a way for the user to switch to a 
    different IME directly from the input method UI.
</li>
<li>
    Bring up the IME's UI quickly. Preload or load on demand any large resources so that users 
    see the IME as soon as they tap on a text field. Cache resources and views for subsequent 
    invocations of the input method.
</li>
<li>
    Conversely, you should release large memory allocations soon after the input method window is 
    hidden, so that applications can have sufficient memory to run. Consider using a delayed message
    to release resources if the IME is in a hidden state for a few seconds.
</li>    
<li>
    Make sure that users can enter as many characters as possible for the language or locale 
    associated with the IME. Remember that users may use punctuation in passwords or user 
    names, so your IME has to provide many different characters to allow users to enter a
    password and get access to the device.
</li>
</ul>

    </div>
      
      <div class="content-footer layout-content-row" 
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        <div class="layout-content-col col-8" style="padding-top:4px">
          
            <div class="g-plusone" data-size="medium"></div>
          
        </div>
        
        <div class="paging-links layout-content-col col-4">
          
            <a href="#" class="prev-page-link hide"
                zh-TW-lang="上一堂課"
                zh-CN-lang="上一课"
                ru-lang="Предыдущий"
                ko-lang="이전"
                ja-lang="前へ"
                es-lang="Anterior"               
                >上一堂课</a>
            <a href="#" class="next-page-link hide"
                zh-TW-lang="下一堂課"
                zh-CN-lang="下一课"
                ru-lang="Следующий"
                ko-lang="다음"
                ja-lang="次へ"
                es-lang="Siguiente"               
                >下一堂课</a>
          
        </div>
        
      </div>
      
      
      

  </div> <!-- end jd-content -->

<div id="footer" class="wrap" >
        

  <div id="copyright">
    
  除非有特别提醒，本文档受 <a
  href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>. 
  For details and <a href="../../../license.html">
  Content License</a>。
  </div>
  <div id="build_info">
    
  Android 4.2&nbsp;r1 - 13 Nov 2012  0:25

  </div>


  <div id="footerlinks">
    
  <p>
    <a href="../../../about/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../../legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../../support.html">Support</a>
  </p>
  </div>

</div> <!-- end footer -->
</div><!-- end doc-content -->

</div> <!-- end body-content --> 




<!-- Grid - for dev 
<script type="text/javascript">

window.gOverride = {
		gColor: '#FF0000',
		pColor: '#EEEEEE',
		gOpacity: 0.10,
		pOpacity: 0.40,
		pHeight: 16,
		pOffset: 2,
		gColumns:16,
		gEnabled:false,
		pEnabled:false
	}
</script>
	
<link href="../../../assets/js/grid/960.gridder.css" rel="stylesheet" type="text/css">
<script src="../../../assets/js/grid/960.gridder.js" type="text/javascript"></script>
-->





<script type="text/javascript">
init(); /* initialize android-developer-docs.js */
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
  var pageTracker = _gat._getTracker("UA-5831155-1");
  pageTracker._trackPageview();
</script>



</body>
</html>



